# Specialized Ship Projectile Types
# These projectiles have unique behaviors: APFSDS, HEAT, Submunition, etc.

# Base penetrator projectile (used by APFSDS)
- type: entity
  id: ShipPenetratorProjectile
  name: armor-piercing penetrator
  parent: BaseBullet
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 500
        Piercing: 300
    penetrationThreshold: 1000
    deleteOnCollide: true
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/57_shell.rsi
    layers:
    - state: 57-shell
    scale: 0.8, 0.8
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 5
  - type: PointLight
    radius: 3
    color: orange
    energy: 0.5
  - type: RadarBlip
    scale: 1.5
    requireNoGrid: true
    shape: triangle
    radarColor: "#FF6600"

# APFSDS (Armor-Piercing Fin-Stabilized Discarding Sabot)
- type: entity
  id: ShipApfsdsProjectile
  name: APFSDS projectile
  parent: BaseBullet
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 50
        Piercing: 30
    deleteOnCollide: false  # Will be deleted when sabot discards
  - type: SubmunitionProjectile
    submunitionPrototype: ShipPenetratorProjectile
    distanceDelay: 50  # Discard sabot after 50 meters
    submunitionDelay: 0  # Not used if distanceDelay > 0
    submunitionCount: 1  # Single penetrator
    spreadAngle: 0  # No spread for single projectile
    velocityMultiplier: 1.8  # Penetrator is 80% faster
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/57_shell.rsi
    layers:
    - state: 57-shell
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 10  # Safety despawn
  - type: PointLight
    radius: 2.5
    color: orange
    energy: 0.4
  - type: RadarBlip
    scale: 2
    requireNoGrid: true
    shape: triangle
    radarColor: "#FF8800"

# HEAT (High Explosive Anti-Tank)
- type: entity
  id: ShipHeatProjectileInstant
  name: HEAT projectile
  parent: BaseBulletTrigger
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 100
        Piercing: 50
    penetrationThreshold: 400
    deleteOnCollide: false  # Handled by HeatSystem
  - type: Heat
    explosionDelay: 0  # Instant explosion
  - type: ExplodeOnTrigger
  - type: Explosive
    explosionType: Default
    totalIntensity: 150
    intensitySlope: 5
    maxIntensity: 25
    maxTileBreak: 2
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/630_armorpiercing_shell_casing.rsi
    layers:
    - state: base-projectile
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 8
  - type: PointLight
    radius: 3
    color: orange
    energy: 0.6
  - type: RadarBlip
    scale: 2.5
    requireNoGrid: true
    shape: triangle
    radarColor: "#FF3300"

# HEAT with fragmentation
- type: entity
  id: ShipHeatProjectileFrag
  name: HEAT-FRAG projectile
  parent: BaseBulletTrigger
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 100
        Piercing: 50
    penetrationThreshold: 400
    deleteOnCollide: false  # Handled by HeatSystem
  - type: Heat
    explosionDelay: 0  # Instant explosion
    fragmentationPrototype: ShipShrapnelFragment
    fragmentationCount: 8  # Spawn 8 fragments
  - type: ExplodeOnTrigger
  - type: Explosive
    explosionType: Default
    totalIntensity: 150
    intensitySlope: 5
    maxIntensity: 25
    maxTileBreak: 2
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/630_armorpiercing_shell_casing.rsi
    layers:
    - state: base-projectile
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 8
  - type: PointLight
    radius: 3
    color: orange
    energy: 0.6
  - type: RadarBlip
    scale: 2.5
    requireNoGrid: true
    shape: triangle
    radarColor: "#FF3300"

# HEAT with delayed explosion
- type: entity
  id: ShipHeatProjectileDelayed
  name: delayed HEAT projectile
  parent: BaseBulletTrigger
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 100
        Piercing: 50
    penetrationThreshold: 400
    deleteOnCollide: false  # Handled by HeatSystem
  - type: Heat
    explosionDelay: 0.2  # 200ms delay after penetration stops
  - type: ExplodeOnTrigger
  - type: Explosive
    explosionType: Default
    totalIntensity: 150
    intensitySlope: 5
    maxIntensity: 25
    maxTileBreak: 2
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/630_armorpiercing_shell_casing.rsi
    layers:
    - state: base-projectile
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 8
  - type: PointLight
    radius: 3
    color: orange
    energy: 0.6
  - type: RadarBlip
    scale: 2.5
    requireNoGrid: true
    shape: triangle
    radarColor: "#FF3300"

# Submunition (base projectile for submunitions)
- type: entity
  id: ShipSubmunitionBase
  name: submunition
  parent: BaseBullet
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 80
        Piercing: 40
    deleteOnCollide: true
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/50_armorpiercing_machinegun_casing.rsi
    layers:
    - state: base-projectile
    scale: 0.7, 0.7
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 4
  - type: PointLight
    radius: 2
    color: orange
    energy: 0.3
  - type: RadarBlip
    scale: 1
    requireNoGrid: true
    shape: triangle
    radarColor: "#FFAA00"

# Submunition rocket/missile
- type: entity
  id: ShipSubmunitionRocket
  name: submunition rocket
  parent: BaseBullet
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 20
        Blunt: 20
    deleteOnCollide: false  # Will be deleted when submunitions spawn
  - type: SubmunitionProjectile
    submunitionPrototype: ShipSubmunitionBase
    submunitionDelay: 1.5  # Spawn submunitions after 1.5 seconds
    submunitionCount: 6  # Spawn 6 submunitions
    spreadAngle: 30  # 30 degree spread
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/mini_rocket.rsi
    layers:
    - state: mini-rocket
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 10
  - type: PointLight
    radius: 3.5
    color: orange
    energy: 0.5
  - type: RadarBlip
    scale: 2
    requireNoGrid: true
    shape: hexagon
    radarColor: "#FF8800"

# Additional projectile types

# AP (Armor Piercing) -
- type: entity
  id: ShipApProjectile
  name: AP projectile
  parent: BaseBullet
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 200
        Piercing: 150
    penetrationThreshold: 600
    deleteOnCollide: true
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/57_shell.rsi
    layers:
    - state: 57-shell
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 6
  - type: PointLight
    radius: 3
    color: orange
    energy: 0.5
  - type: RadarBlip
    scale: 2
    requireNoGrid: true
    shape: triangle
    radarColor: "#FF6600"

# APHE (Armor Piercing High Explosive) - Penetrates then explodes
- type: entity
  id: ShipApheProjectile
  name: APHE projectile
  parent: BaseBulletTrigger
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 150
        Piercing: 100
    penetrationThreshold: 500
    deleteOnCollide: false
  - type: Heat
    explosionDelay: 0.1  # 100ms delay after penetration
  - type: ExplodeOnTrigger
  - type: Explosive
    explosionType: Default
    totalIntensity: 120
    intensitySlope: 4
    maxIntensity: 20
    maxTileBreak: 2
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/630_armorpiercing_shell_casing.rsi
    layers:
    - state: base-projectile
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 7
  - type: PointLight
    radius: 3
    color: orange
    energy: 0.5
  - type: RadarBlip
    scale: 2.5
    requireNoGrid: true
    shape: triangle
    radarColor: "#FF4400"

# APHE with fragmentation
- type: entity
  id: ShipApheProjectileFrag
  name: APHE-FRAG projectile
  parent: BaseBulletTrigger
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 150
        Piercing: 100
    penetrationThreshold: 500
    deleteOnCollide: false
  - type: Heat
    explosionDelay: 0.1  # 100ms delay after penetration
    fragmentationPrototype: ShipShrapnelFragment
    fragmentationCount: 6  # Spawn 6 fragments
  - type: ExplodeOnTrigger
  - type: Explosive
    explosionType: Default
    totalIntensity: 120
    intensitySlope: 4
    maxIntensity: 20
    maxTileBreak: 2
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/630_armorpiercing_shell_casing.rsi
    layers:
    - state: base-projectile
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 7
  - type: PointLight
    radius: 3
    color: orange
    energy: 0.5
  - type: RadarBlip
    scale: 2.5
    requireNoGrid: true
    shape: triangle
    radarColor: "#FF4400"

# HESH (High Explosive Squash Head)
- type: entity
  id: ShipHeshProjectile
  name: HESH projectile
  parent: BaseBulletTrigger
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 80
        Piercing: 30
    penetrationThreshold: 200
  - type: ExplodeOnTrigger
  - type: Explosive
    explosionType: Default
    totalIntensity: 180
    intensitySlope: 6
    maxIntensity: 30
    maxTileBreak: 3
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/630_armorpiercing_shell_casing.rsi
    layers:
    - state: base-projectile
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 6
  - type: PointLight
    radius: 3.5
    color: orange
    energy: 0.6
  - type: RadarBlip
    scale: 2.5
    requireNoGrid: true
    shape: triangle
    radarColor: "#FF2200"

# Shrapnel round - Explodes and spawns multiple fragments
- type: entity
  id: ShipShrapnelFragment
  name: shrapnel fragment
  parent: BaseBullet
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 30
        Piercing: 20
    deleteOnCollide: true
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/50_armorpiercing_machinegun_casing.rsi
    layers:
    - state: base-projectile
    scale: 0.5, 0.5
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 3
  - type: PointLight
    radius: 1.5
    color: orange
    energy: 0.2
  - type: RadarBlip
    scale: 0.8
    requireNoGrid: true
    shape: triangle
    radarColor: "#FFAA00"

- type: entity
  id: ShipShrapnelProjectile
  name: shrapnel round
  parent: BaseBullet
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Structural: 50
        Blunt: 30
    deleteOnCollide: false
  - type: SubmunitionProjectile
    submunitionPrototype: ShipShrapnelFragment
    submunitionDelay: 0.05  # Very short delay to spawn fragments quickly
    submunitionCount: 12  # 12 fragments
    spreadAngle: 60  # Wide spread
  - type: Sprite
    sprite: _Mono/Objects/SpaceArtillery/630_armorpiercing_shell_casing.rsi
    layers:
    - state: base-projectile
  - type: ShipWeaponProjectile
  - type: TimedDespawn
    lifetime: 5
  - type: PointLight
    radius: 3
    color: orange
    energy: 0.5
  - type: RadarBlip
    scale: 2
    requireNoGrid: true
    shape: triangle
    radarColor: "#FF5500"

